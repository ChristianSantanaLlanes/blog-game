---
interface Post {
    title: string;
    slug: string;
    type: string;
}

interface Props {
    posts: Post[];
}

const { posts } = Astro.props;
---

<div class="widget trending-widget">
    <h3 class="widget-title">
        <svg
            class="fire-icon"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
        >
            <path
                d="M12 2c.8 2.5 3 4 3 7 0 2-1.5 3.5-3 4.5-1.5-1-3-2.5-3-4.5 0-3 2.2-4.5 3-7z"
            ></path>
            <path
                d="M12 22c-4 0-7-3-7-7 0-3 2-5 4-7 .5 1 1.5 2 3 2s2.5-1 3-2c2 2 4 4 4 7 0 4-3 7-7 7z"
            ></path>
        </svg>
        <span>En Tendencia</span>
        <span class="accent-line"></span>
    </h3>
    <ul class="trending-list">
        {
            posts.map((post, index) => (
                <li class="trending-item" style={`--index: ${index}`}>
                    <span class={`rank rank-${index + 1}`}>
                        {String(index + 1).padStart(2, "0")}
                    </span>
                    <div class="info">
                        <a href={`/${post.type}/${post.slug}`} class="title">
                            {post.title}
                        </a>
                    </div>
                </li>
            ))
        }
    </ul>
</div>

<style>
    .widget {
        margin-bottom: 2.5rem;
    }

    .widget-title {
        font-size: 1.1rem;
        text-transform: uppercase;
        letter-spacing: 1.5px;
        margin-bottom: 1.5rem;
        padding-bottom: 0.75rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.08);
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .fire-icon {
        width: 20px;
        height: 20px;
        stroke: var(--color-secondary);
        animation: flicker 1.5s ease-in-out infinite alternate;
    }

    .accent-line {
        flex: 1;
        height: 2px;
        background: var(--gradient-secondary);
        margin-left: 10px;
        border-radius: 2px;
    }

    .trending-list {
        list-style: none;
        padding: 0;
    }

    .trending-item {
        display: flex;
        align-items: flex-start;
        gap: 1rem;
        padding: 0.75rem;
        margin-bottom: 0.5rem;
        border-radius: 8px;
        transition: all var(--transition-normal);
        animation: slideInRight 0.5s ease forwards;
        animation-delay: calc(var(--index) * 0.1s);
        opacity: 0;
    }

    .trending-item:hover {
        background: rgba(255, 255, 255, 0.03);
        transform: translateX(5px);
    }

    .rank {
        font-family: var(--font-heading);
        font-size: 1.8rem;
        font-weight: 700;
        line-height: 1;
        min-width: 35px;
        background: linear-gradient(180deg, #333 0%, #222 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .rank-1 {
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        background-clip: text;
        filter: drop-shadow(0 0 8px var(--color-primary-glow));
    }

    .rank-2 {
        background: var(--gradient-secondary);
        -webkit-background-clip: text;
        background-clip: text;
        filter: drop-shadow(0 0 8px var(--color-secondary-glow));
    }

    .rank-3 {
        background: linear-gradient(
            180deg,
            var(--color-accent) 0%,
            var(--color-purple) 100%
        );
        -webkit-background-clip: text;
        background-clip: text;
        filter: drop-shadow(0 0 8px var(--color-accent-glow));
    }

    .info {
        flex: 1;
        padding-top: 2px;
    }

    .title {
        color: rgba(255, 255, 255, 0.85);
        text-decoration: none;
        font-weight: 500;
        font-size: 0.95rem;
        line-height: 1.4;
        transition: all var(--transition-fast);
        display: block;
    }

    .title:hover {
        color: var(--color-primary);
        text-shadow: 0 0 10px var(--color-primary-glow);
    }

    @keyframes slideInRight {
        from {
            opacity: 0;
            transform: translateX(-20px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    @keyframes flicker {
        0%,
        100% {
            opacity: 1;
        }
        50% {
            opacity: 0.6;
        }
    }
</style>
